{
  "openapi": "3.0.0",
  "info": {
    "title": "Serious Game Server API",
    "description": "This is the documentation of the Serious Game Server API. Find the repository [on github](https://github.com/robinlarondelle/serious-game-server)",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost:3000/"
    }
  ],
  "tags": [
    {
      "name": "Game",
      "description": "A game is a playable instance of a game session. It holds the questions of a game and the specified categories that belong to those questions"
    },
    {
      "name": "Play",
      "description": "A play is a recorded session of a player, which holds the answers to questions and builds up a user profile over time"
    },
    {
      "name": "Category",
      "description": "A category is a property of a player. Questions can increase or decrease the users performance in one of the categories"
    }
  ],
  "components": {
    "schemas": {
      "ApiError": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "code": {
            "type": "integer",
            "format": "int32"
          }
        },
        "required": [
          "error",
          "message",
          "code"
        ]
      },
      "Category": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "integer",
            "description": "Autogenerated ID"
          },
          "name": {
            "type": "string",
            "description": "The name of the category. For example: \"Integrity\", \"Humanity\" etc. The name must be unique"
          }
        },
        "required": [
          "name"
        ],
        "description": "A category tells something about a question and which 'property' it's targeting. For example, if a question has a category \"Integrity\", all answers belonging to that question will influence that category in one way or another. See the Question model for more information.\n"
      }
    },
    "parameters": {
      "catID": {
        "name": "catID",
        "in": "path",
        "description": "Category ID",
        "required": true,
        "schema": {
          "type": "integer"
        },
        "example": "5ede5939ce29e417dc5bedf0"
      }
    },
    "responses": {
      "404": {
        "description": "Not Found",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                },
                "code": {
                  "type": "integer",
                  "format": "int32"
                }
              },
              "required": [
                "error",
                "message",
                "code"
              ]
            }
          }
        }
      },
      "default": {
        "description": "Server error",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                },
                "code": {
                  "type": "integer",
                  "format": "int32"
                }
              },
              "required": [
                "error",
                "message",
                "code"
              ]
            },
            "example": {
              "error": "ServerError",
              "message": "Something went wrong. {error}",
              "code": 400
            }
          }
        }
      },
      "duplicate": {
        "description": "Duplicate",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                },
                "code": {
                  "type": "integer",
                  "format": "int32"
                }
              },
              "required": [
                "error",
                "message",
                "code"
              ]
            },
            "example": {
              "error": "DuplicateError",
              "message": "{error message}",
              "code": 400
            }
          }
        }
      }
    }
  },
  "paths": {
    "/category": {
      "get": {
        "tags": [
          "Category"
        ],
        "summary": "Get all the categories",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Category"
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/default"
          }
        }
      },
      "post": {
        "tags": [
          "Category"
        ],
        "summary": "Add a new category",
        "description": "This endpoint will add a new category to the server. The name of the category has to be unique, otherwise there will be a Duplicate Error\n",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Category"
              },
              "example": {
                "name": "Integrity"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Category"
                  }
                },
                "example": [
                  {
                    "_id": "5j4k3l234ujklhjk234h5jk",
                    "name": "Integrity"
                  },
                  {
                    "_id": "5h4j32h5jk34h52543gf434",
                    "name": "Humanity"
                  }
                ]
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/duplicate"
          },
          "default": {
            "$ref": "#/components/responses/default"
          }
        }
      }
    },
    "/category/:catID": {
      "put": {
        "tags": [
          "Category"
        ],
        "summary": "Edit a category by ID",
        "parameters": [
          {
            "$ref": "#/components/parameters/catID"
          }
        ],
        "description": "Use this endpoint to edit an existing Category.  The request body takes the name, and combined with the catID in the parameters, will edit the given Category. A edit will return the complete updated list.\n",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Category"
              },
              "example": {
                "name": "Humanity"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Category"
                  }
                },
                "example": [
                  {
                    "_id": "5ede5939ce29e417dc5bedf0",
                    "name": "Integrity"
                  },
                  {
                    "_id": "5ede5939ce29e417dcfdadf0",
                    "name": "Humanity"
                  }
                ]
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/404"
          },
          "default": {
            "$ref": "#/components/responses/default"
          }
        }
      },
      "delete": {
        "tags": [
          "Category"
        ],
        "summary": "something",
        "description": "Deletes a Category from the server by it's catID.  If successfull, returns the full list of updated Categories.\n",
        "parameters": [
          {
            "$ref": "#/components/parameters/catID"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Category"
                  }
                },
                "example": [
                  {
                    "_id": "5ede5939ce29e417dc5bedf0",
                    "name": "Integrity"
                  },
                  {
                    "_id": "5ede5939ce29e417dcfdadf0",
                    "name": "Humanity"
                  }
                ]
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/404"
          },
          "default": {
            "$ref": "#/components/responses/default"
          }
        }
      }
    }
  }
}